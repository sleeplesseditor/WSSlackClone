<link rel="stylesheet" href="./chat.css" />

<div class="container-main">
    <div>
        <div class="container-form">
            <form id="message-form">
                    <input aria-label="user-message" id="user-message" type="text" placeholder="Enter your message..." />
                    <input aria-label="message-send" id="message-send" type="submit" value="Send" />
            </form>
            <ul id="messages"></ul>
        </div>
    </div>
</div>

<script src="/socket.io/socket.io.js"></script>
<script>
    const socket = io('http://localhost:9000');
    socket.on('messageFromServer', (dataFromServer) => {
        console.log(dataFromServer);
        socket.emit('messageToServer', ({data: 'This is from the client'}))
    });

    socket.on('messageToClients', (msg) => {
        document.querySelector('#messages').innerHTML += `<li>${msg.text}</li>`;
    });

    document.querySelector('#message-form').addEventListener('submit', (event) => {
        event.preventDefault();
        console.log('Form submitted');
        const newMessage = document.querySelector('#user-message').value;
        socket.emit('newMessageToServer', { text: newMessage });
    });
</script>